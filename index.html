<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>generador de facturas</title>
  <link rel="icon" href="favicon/favicon.ico" />
  <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="header-row">
        <div class="header-copy">
          <h1>generador de facturas</h1>
          <p>crea y descarga facturas en <strong>PDF</strong> de forma sencilla.</p>
        </div>
        <div class="header-actions">
          <input id="jsonFileInput" type="file" accept="application/json" hidden />
          <button id="loadJsonBtn" class="btn-secondary" type="button">cargar JSON</button>
        </div>
      </div>
    </div>

    <div class="form-section">
      <!-- Bloque 1: Datos del emisor -->
      <div class="form-card">
        <h3>emisor</h3>
        <div class="form-grid">
          <div class="field full-width">
            <input id="emisorNombre" type="text" placeholder="nombre" aria-label="nombre" />
          </div>
          <div class="field full-width">
            <input id="emisorDireccion1" type="text" placeholder="dirección 1" aria-label="dirección 1" />
          </div>
          <div class="field full-width">
            <input id="emisorDireccion2" type="text" placeholder="dirección 2" aria-label="dirección 2" />
          </div>
          <div class="field full-width">
            <input id="emisorNIF" type="text" placeholder="N.I.F." aria-label="N.I.F." />
          </div>
        </div>
      </div>

      <!-- Bloque 2: Datos del cliente -->
      <div class="form-card">
        <h3>cliente</h3>
        <div class="form-grid">
          <div class="field full-width">
            <input id="clienteNombre" type="text" placeholder="nombre" aria-label="nombre" />
          </div>
          <div class="field full-width">
            <input id="clienteDireccion1" type="text" placeholder="dirección 1" aria-label="dirección 1" />
          </div>
          <div class="field full-width">
            <input id="clienteDireccion2" type="text" placeholder="dirección 2" aria-label="dirección 2" />
          </div>
          <div class="field full-width">
            <input id="clienteNIF" type="text" placeholder="N.I.F." aria-label="N.I.F." />
          </div>
        </div>
      </div>

      <!-- Bloque 3: Datos de la factura -->
      <div class="form-card">
        <h3>factura</h3>
        <div class="form-grid">
          <div class="field">
            <label for="facturaNumero">número de factura</label>
            <input id="facturaNumero" type="number" step="1" min="1" value="1" />
          </div>
          <div class="field">
            <label for="facturaFecha">fecha</label>
            <input id="facturaFecha" type="date" />
          </div>
          <div class="field full-width">
            <input id="facturaAsunto" type="text" placeholder="asunto / concepto" aria-label="asunto / concepto" />
          </div>
          <div class="field full-width">
            <input id="instruccionesPago1" type="text" placeholder="instrucciones de pago 1 (ej: transferencia bancaria)" aria-label="instrucciones de pago 1" />
          </div>
          <div class="field full-width">
            <input id="instruccionesPago2" type="text" placeholder="instrucciones de pago 2 (ej: ES13 2100 0287 3301 0236 1086)" aria-label="instrucciones de pago 2" />
          </div>
        </div>
      </div>

      <!-- Bloque 4: Cálculos -->
      <div class="form-card">
        <h3>cálculos</h3>
        <div class="form-grid">
          <div class="field full-width">
            <label for="baseImponible">base imponible (€)</label>
            <input id="baseImponible" type="number" inputmode="decimal" step="0.01" min="0" value="425" />
          </div>
          <div class="field">
            <label class="check-label" for="ivaCheck">
              <input id="ivaCheck" type="checkbox" checked />
              IVA
            </label>
            <input id="ivaRate" type="number" step="1" min="0" value="21" />
          </div>
          <div class="field irpf-field">
            <label class="check-label" for="irpfCheck">
              <input id="irpfCheck" type="checkbox" />
              retención IRPF
            </label>
            <input id="irpfRate" type="number" step="1" min="0" value="15" disabled />
          </div>
          <div class="field full-width iva-exception-field" id="ivaExceptionField">
            <input id="ivaException" type="text" placeholder="causa excepción iva" aria-label="causa excepción iva" />
          </div>
        </div>
      </div>
    </div>

    <!-- Previsualización -->
    <div class="preview-section">
      <h3>previsualización</h3>
      <div class="invoice-preview" id="invoicePreview">
        <div class="invoice-header-section">
          <div class="invoice-block">
            <div class="invoice-name" id="prevEmisorNombre">—</div>
            <div id="prevEmisorDireccion1">—</div>
            <div id="prevEmisorDireccion2">—</div>
            <div id="prevEmisorNIF">—</div>
          </div>
          <div class="invoice-meta">
            <div><strong>N.º factura:</strong> <span id="prevFacturaNum">—</span></div>
            <div><strong>Fecha:</strong> <span id="prevFacturaFecha">—</span></div>
          </div>
        </div>

        <div class="invoice-block">
          <div class="invoice-name" id="prevClienteNombre">—</div>
          <div id="prevClienteDireccion1">—</div>
          <div id="prevClienteDireccion2">—</div>
          <div id="prevClienteNIF">—</div>
        </div>

        <div class="invoice-concept">
          <div id="prevFacturaAsunto">—</div>
        </div>

        <div class="invoice-totals">
          <div class="invoice-row">
            <span>Subtotal</span>
            <strong id="prevSubtotal">—</strong>
          </div>
          <div class="invoice-row" id="prevIrpfRow">
            <span>I.R.P.F.</span>
            <strong id="prevIrpf">—</strong>
          </div>
          <div class="invoice-row">
            <span id="prevIvaLabel">I.V.A.</span>
            <strong id="prevIva">—</strong>
          </div>
          <div class="invoice-row total-row">
            <span>TOTAL</span>
            <strong id="prevTotal">—</strong>
          </div>
        </div>
        
        <div class="invoice-payment-instructions" id="prevInstruccionesPago"></div>
        
        <div class="invoice-notes">
          <div class="invoice-note" id="prevIvaException"></div>
        </div>
      </div>

      <div class="actions">
        <button id="downloadBtn" class="btn-primary">descargar</button>
      </div>
    </div>

    <div class="branding-badge">
      <a href="https://meowrhino.studio" target="_blank" rel="noopener noreferrer">meowrhino.studio</a>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="script.js"></script>
</body>
</html>
